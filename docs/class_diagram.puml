@startuml

package ch.zucchinit.zauction {
    class SpringApplication
    class ZAuctionApplication {
        +main(String[]): void
    }
    "ZAuctionApplication" --> "SpringApplication"

    package Category {
        interface CategoryRepository<extends JARepository<Category, Long>> {
            -findByParentIsNull: Category[]
        }
        class CategoryController {
            -categoryService: CategoryService
            +all(): Category[]
        }
        class CategoryService {
            -categoryRepository: CategoryRepository
            +findAll(): Category[]
        }

        "CategoryController" --> "CategoryService"
        "CategoryService" --> "CategoryRepository"
    }

    package Lot {
        interface LotRepository<extends JARepository<Lot, Long>>
        class LotDTO
        class LotController {
            -lotService: LotService
            +paginate(Integer page, Integer take, Category category, String search): LotDTO.LotPaginatedThumbnail
            +one(Long id): LotDTO.LotDetails
        }
        class LotService {
            -lotRepository: LotRepository
            +findByPageWithCategoryAndSearch(Integer page, Integer take, Category category, String search): LotDTO.LotPaginatedThumbnail
            +findById(Long id): LotDTO.LotDetails
            {static} isFinished() : Specification<Lot>
            {static} hasCategoryId(Long id) : Specification<Lot>
            {static} multiFieldSearch(String keyword) : Specification<Lot>
        }

        "LotController" --> "LotService"
        "LotService" --> "LotRepository"
    }

    package Auction {
        interface AuctionRepository<extends JARepository<Auction, Long>>
   }

    package Exceptions {
        exception "ResourceNotFound"
        class "ExceptionsDTO" {}
        class ExceptionsAdvice {
            + resourceNotFoundHandler: void
            + validationErrorHandler : ExceptionsDTO
            + unknownErrorHandler: ExceptionsDTO
        }

        "ResourceNotFound" --> "ExceptionsAdvice"
        "ExceptionsDTO" --> "ExceptionsAdvice"
    }

    package Security {
        class SecurityConfig {
            corsConfigurationSource: CorsConfigurationSource
            securityFilterChain: SecurityFilterChain
        }
    }

    class S3Connector {
        -s3client: s3Client
        +uploadMedias(Long id)
        +getUrls(Long id): String[]
    }
    "LotService" --> "S3Connector"
}

@enduml